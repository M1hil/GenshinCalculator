<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>     
            PrimoCalculator
        </title>
        <link rel="stylesheet" href="styles.css">
            <meta charset="UTF-8">
            <meta name="keywords" content="HTML">
            <meta name="description" content="PrimoCalculator">
            <meta name="author" content="Michael Georg Pitsch">
            <meta http-equiv="refresh" content="3600">
            <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    </head>
    <h1>PrimoCalculator</h1>
    <body>
        <div class="grid-container">
            <div class="grid-item" onchange="dateDiff(), setMax(), clcupdate(), clcabyssreset(), clcshopreset(), clclivestreamcodes(), clcversionupdate()">
                <label for="from">1st Date:</label>
                <input type="date" id="from" name="from">
                <br>
            </div>
            <div class="grid-item">
                <p id="daysdiff"></p>   
            </div>
            <div class="grid-item" onchange="dateDiff(), setMax(), clcupdate(), clcabyssreset(), clcshopreset(), clclivestreamcodes(), clcversionupdate()">
                <label for="to">2nd Date:</label>
                <input type="date" id="to" name="to">
            </div>
            <div class="grid-item">
                <p>Daily Commissions:</p>
            </div>
            <div class="grid-item">
                <form id="dailys" name="dailys" onclick="checkAddress()" 
                    oninput="dailyout.value=parseInt(mydailySlider.value)">
                    0
                    <input type="range" id="mydailySlider" name="mydailySlider" value="0" min="0" max="0">
                    <span id="daysdaily" oninput="document.getElementById('dailys').innerHTML = this.value"></span>
                    =
                    <output name="dailyout" for="mydailySlider"></output>
                </form> 
                <p id="dailys"></p>    
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Livestream Codes:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="codes" name="codes" onclick="checkAddress()"/>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Compensations:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="compensations" name="compensations" onclick="checkAddress()"/>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Events:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="events" name="events" onclick="checkAddress()"/>
            </div>
            <div class="grid-item">
                <i>Note: You will probably get more than 30 Primogems per day through Events (counter = 30 Primogems * Days); 
                    be aware, that the accuracy will decline for fewer time differences between the 2 dates.</i>
            </div>
            <div class="grid-item">
                <p>Character Trials:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="trials" name="trials" onclick="checkAddress()"/>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Abyss:</p>
            </div>
            <div class="grid-item">
                <p>Floor 9:             
                    <form id="abyssfloor9" name="abyssfloor9" onclick="checkAddress()" 
                        oninput="abyssfloor9out.value=parseInt(myabyssfloor9Slider.value)">
                        0
                        <input type="range" id="myabyssfloor9Slider" name="myabyssfloor9Slider" value="0" min="0" max="9">
                        9 =
                        <output name="abyssfloor9out" for="myabyssfloor9Slider"></output>
                    </form>
                </p>
            </div>
            <div class="grid-item">
                <p>Floor 10:            
                    <form id="abyssfloor10" name="abyssfloor10" onclick="checkAddress()" 
                        oninput="abyssfloor10out.value=parseInt(myabyssfloor10Slider.value)">
                        0
                        <input type="range" id="myabyssfloor10Slider" name="myabyssfloor10Slider" value="0" min="0" max="9">
                        9 =
                        <output name="abyssfloor10out" for="myabyssfloor10Slider"></output>
                    </form>
                </p>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Floor 11:            
                    <form id="abyssfloor11" name="abyssfloor11" onclick="checkAddress()" 
                        oninput="abyssfloor11out.value=parseInt(myabyssfloor11Slider.value)">
                        0
                        <input type="range" id="myabyssfloor11Slider" name="myabyssfloor11Slider" value="0" min="0" max="9">
                        9 =
                        <output name="abyssfloor11out" for="myabyssfloor11Slider"></output>
                    </form>
                </p>
            </div>
            <div class="grid-item">
                <p>Floor 12:            
                    <form id="abyssfloor12" name="abyssfloor12" onclick="checkAddress()" 
                        oninput="abyssfloor12out.value=parseInt(myabyssfloor12Slider.value)">
                        0
                        <input type="range" id="myabyssfloor12Slider" name="myabyssfloor12Slider" value="0" min="0" max="9">
                        9 =
                        <output name="abyssfloor12out" for="myabyssfloor12Slider"></output>
                    </form>
                </p>
            </div>
            <div class="grid-item">
                <p>Shop reset:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="shopreset" name="shopreset" onclick="checkAddress()"/>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Battlepass free:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="battlepassfree" name="battlepassfree" onclick="checkAddress()"/>
                <input type="number" id="battlepassbluefates" name="battlepassbluefates" min="0" max="5"> 
            </div>
            <div class="grid-item">
                <div class="info" onclick="show(this)">i</div> 
                <i id="infoid" class="hide">Please enter the Battlepasslevel you can reach in average / 10 (example: level 43 will be 4)</i>
            </div>
            <div class="grid-item">
                <p>Battlepass paied:</p>
            </div>
            <div class="grid-item">
                <input type="checkbox" id="battlepasspaied" name="battlepasspaied" onclick="checkAddress()"/>
                    <input type="number" id="battlepasspurplefates" name="battlepasspurplefates" min="0" max="5">
            </div>
            <div class="grid-item">
                <div class="info" onclick="show(this)">i</div> 
                <i id="infoid" class="hide">Please enter the Battlepasslevel you can reach in average / 10 (example: level 43 will be 4)</i>
            </div>
            <div class="grid-item">
                <p>Welkin Moon:</p>
            </div>
            <div class="grid-item">
                <form id="welkin" name="welkin" onclick="checkAddress()" 
                    oninput="welkinout.value=parseInt(mywelkinSlider.value)">
                    0
                    <input type="range" id="mywelkinSlider" name="mywelkinSlider" value="0" min="0" max="0">
                    <span id="dayswelkin" oninput="document.getElementById('welkin').innerHTML = this.value"></span>
                    = 
                    <output name="welkinout" for="mywelkinSlider"></output>
                </form>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Additional Primogems:</p>
            </div>
            <div class="grid-item">
                <input type="number" id="addprimos" name="additionalprimos" min="0" max="99999">
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Additional Intertwined Fates:</p>
            </div>
            <div class="grid-item">
                <input type="number" id="addpurplefates" name="additionalpurplefates" min="0" max="999">
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p>Additional Acquaint Fates:
            </div>
            <div class="grid-item">
                <input type="number" id="addbluefates" name="additionalbluefates" min="0" max="999"></p>
            </div>
            <div class="grid-item">     </div>
            <div class="grid-item">
                <p><span id="primogems"></span> Primogems = <span id="umgewandelteFates"></span> Fates</p>
            </div>
            <div class="grid-item">
                <p><span id="intertwinedFates"></span> Intertwined Fates</p>
            </div>
            <div class="grid-item">
                <p><span id="acquaintFates"></span> Acquaint Fates</p></div>
        </div>
        

        <script>
            function clcdate(){
                var from = document.getElementById("from").value;
                var to = document.getElementById("to").value;
                var date1 = new Date(from);
                var date2 = new Date(to);
                var timeDiff = date2.getTime() - date1.getTime();
                var daysDiff = timeDiff / (1000 * 60 * 60 *24)
                if(daysDiff < 0){
                    return null;
                } 
                else {
                    return daysDiff;
                }
            }
        </script>
        <script>
            function dateDiff(){
                var daysDiff = clcdate()
                if(daysDiff){
                    document.getElementById("daysdiff").innerHTML = `Difference in days: ${daysDiff}`; 
                    document.getElementById("daysdaily").innerHTML = daysDiff;
                    document.getElementById("dayswelkin").innerHTML = daysDiff;
                } else {
                    document.getElementById("daysdiff").innerHTML = "Please enter valid date";
                }
            }   
        </script>
        <script>
            function setMax() {
                const daysDiff = clcdate()
                slider1 = document.getElementById ('mydailySlider');
                slider2 = document.getElementById ('mywelkinSlider');
                if ('max' in slider1 || 'max' in slider2) {  // Google Chrome, Safari from version 5 and Opera
                    slider1.max = daysDiff;
                    slider2.max = daysDiff;
                } 
                else { // Safari before version 5
                    slider1.setAttribute ("max", daysDiff);
                    slider2.setAttribute ("max", daysDiff);
                }
                dateDiff(slider1);
                dateDiff(slider2);
            }
        </script>
        <script>
            function clcupdate() {
                const datezero = new Date(2022, 11, 7);                         // 7.11.2022 ist Tag 0
                let milzero = datezero.getTime();
                let dayszero = Math.ceil(milzero / (1000 * 60 * 60 * 24));      // Tag 0 in Tagen von Anfang
                var from = document.getElementById("from").value;
                var dateday1 = new Date(from);                                  // 1. Kalender Tag
                let milday1 = dateday1.getTime();
                let daysday1 = Math.floor(milday1 / (1000 * 60 * 60 * 24));     // 1. Kalender Tag in Tagen von Anfang
                let dateDiff = daysday1 - dayszero;                             // Tage von Tag 0 bis 1. Kalendertag
                var daysDiff = clcdate()
                daysleft = dateDiff % 21;                                       // Tage seit 3 Wochen Update
                if (daysDiff <=21){
                    if (daysleft + daysDiff >= 21){
                        let threeweeks = 1;
                        return threeweeks;
                    }
                    else{
                        let threeweeks = 0;
                        return threeweeks;
                    }
                }
                else {
                    timesover21days = Math.floor(daysDiff / 21);
                    restover21days =  daysDiff % 21;
                    if (daysleft + restover21days >= 21){
                        let threeweeks = 1 + timesover21days;
                        return threeweeks;
                    }
                    else{
                        let threeweeks = 0 + timesover21days;
                        return threeweeks;
                    }
                }
            }
        </script>
        <script>
            function clcversionupdate() {
                const datezero = new Date(2022, 11, 7);                         // 7.11.2022 ist Tag 0
                let milzero = datezero.getTime();
                let dayszero = Math.ceil(milzero / (1000 * 60 * 60 * 24));      // Tag 0 in Tagen von Anfang
                var from = document.getElementById("from").value;
                var dateday1 = new Date(from);                                  // 1. Kalender Tag
                let milday1 = dateday1.getTime();
                let daysday1 = Math.floor(milday1 / (1000 * 60 * 60 * 24));     // 1. Kalender Tag in Tagen von Anfang
                let dateDiff = daysday1 - dayszero;                             // Tage von Tag 0 bis 1. Kalendertag
                var daysDiff = clcdate()
                daysleft = dateDiff % 42;                                       // Tage seit 6 Wochen Update
                if (daysDiff <=42){
                    if (daysleft + daysDiff >= 42){
                        let versionupdate = 1;
                        return versionupdate;
                    }
                    else{
                        let versionupdate = 0;
                        return versionupdate;
                    }
                }
                else {
                    timesover42days = Math.floor(daysDiff / 42);
                    restover42days =  daysDiff % 42;
                    if (daysleft + restover42days >= 42){
                        let versionupdate = 1 + timesover42days;
                        return versionupdate;
                    }
                    else{
                        let versionupdate = 0 + timesover42days;
                        return versionupdate;
                    }
                }
            }
        </script>
        <script>
            function clcabyssreset() {
                var from = document.getElementById("from").value;
                var date1 = new Date(from);
                var mil1 = date1.getTime();
                var days1 = mil1 / (1000 * 60 * 60 *24);
                //bis hier: days1 = days from 0 (19434 etc.)
                var abyssresets = 0;
                var days = 1;
                var daysDiff = clcdate()
                while (days <= daysDiff) {
                    let daysneu = days1 + days;
                    var milneu = daysneu * (1000 * 60 * 60 *24);   
                    var dateneu = new Date(milneu);
                    let monthdays = dateneu.getDate();  
                    if (monthdays == 1 || monthdays == 16) {
                        abyssresets += 1;
                    }
                    else {
                        abyssresets += 0;
                    }
                    days = days + 1;
                }
                return abyssresets;
            }       
        </script>
        <script>
            function clcshopreset() {
                var from = document.getElementById("from").value;
                var date1 = new Date(from);
                var mil1 = date1.getTime();
                var days1 = mil1 / (1000 * 60 * 60 *24);
                //bis hier: days1 = days from 0 (19434 etc.)
                var shopresets = 0;
                var days = 1;
                var daysDiff = clcdate()
                while (days <= daysDiff) {
                    let daysneu = days1 + days;
                    var milneu = daysneu * (1000 * 60 * 60 *24);   
                    var dateneu = new Date(milneu);
                    let monthdays = dateneu.getDate();  
                    if (monthdays == 1) {
                        shopresets += 1;
                    }
                    else {
                        shopresets += 0;
                    }
                    days = days + 1;
                }
                return shopresets;
            }       
        </script>
        <script>
            function clclivestreamcodes() {
                const datezero = new Date(2022, 10, 26);                         // 26.10.2022 ist Tag 0
                let milzero = datezero.getTime();
                let dayszero = Math.ceil(milzero / (1000 * 60 * 60 * 24));      // Tag 0 in Tagen von Anfang
                var from = document.getElementById("from").value;
                var dateday1 = new Date(from);                                  // 1. Kalender Tag
                let milday1 = dateday1.getTime();
                let daysday1 = Math.floor(milday1 / (1000 * 60 * 60 * 24));     // 1. Kalender Tag in Tagen von Anfang
                let dateDiff = daysday1 - dayszero;                             // Tage von Tag 0 bis 1. Kalendertag
                var daysDiff = clcdate()
                daysleft = dateDiff % 42;                                       // Tage seit 3 Wochen Update
                if (daysDiff <=42){
                    if (daysleft + daysDiff >= 42){
                        let livestreams = 1;
                        return livestreams;
                    }
                    else{
                        let livestreams = 0;
                        return livestreams;
                    }
                }
                else {
                    timesover42days = Math.floor(daysDiff / 42);
                    restover21days =  daysDiff % 42;
                    if (daysleft + restover21days >= 42){
                        let livestreams = 1 + timesover42days;
                        return livestreams;
                    }
                    else{
                        let livestreams = 0 + timesover42days;
                        return livestreams;
                    }
                }
            }
        </script>
        <script>
            function show(indoid) {
                var className = infoid.getAttribute("class");
                if (className == "hide") {
                    infoid.className = "unhide"
                }
                else {
                    infoid.className = "hide"
                }
            }
        </script>
        <script type="text/javascript" src="./checkbox.js"></script>
        <!--<script type="text/javascript" src="./javascriptfiles.js"></script>-->
    </body>
</html>